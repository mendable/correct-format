CorrectFormat Plugin

Author: Jason Lambert
Homepage: http://www.mendable.com/

This plugin allows you to correct simple user input mistakes without raising an ActiveRecord Error and without inserting inconsistently formatted data into your database. Using this plugin will enhance the usability and user-friendlyness of your application and increase your data integrity.


Summary of functions by problem solved:
---------------------------------------

Problem: User's enter text in all upper case for lowercase fields only
Solution: correct_format_downcase :fieldname


Problem: User's enter text in all upper case for fields that are typically capitalized and lower cased, eg, address lines
Solution: correct_format_capitalize_each :fieldname


Problem: User's accidently type comma into their email address instead of period
Solution: correct_format_email :fieldname
Notes: A special function just for email address fields, that will downcase and exchange comma's with period's in users email addresses


Problem: User's enter lower case text when typically formatted as upper case (eg, UK Postcodes are typically printed in Uppercase)
Solution: correct_format_upcase :fieldname




class User < ActiveRecord::Base

  # Make usernames consistently lower case
  correct_format_downcase :username

  # Replace comma's with periods in email address, and make email address all lower case
  correct_format_email :email

  # Capitalize first letter of first word, and downcase the rest
  correct_format_capitalize :username

  # Capitalize all first letters of ALL WORDS in the string
  correct_format_capitalize_each :address_line_1, :address_line_2

  # UK Postcodes are upper case
  correct_format_upcase :postcode

  # apply a function to EVERY string field in a record
  correct_format_capitalize self.attributes.select{|k, v| self.column_for_attribute(k).type == :string }.map(&:first)
end


TESTING
----------
# sudo apt-get install sqlite3 libsqlite3-dev
# sudo gem install sqlite3-ruby
# rake test

